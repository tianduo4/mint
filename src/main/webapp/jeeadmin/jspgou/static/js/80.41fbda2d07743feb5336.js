webpackJsonp([80],{"0wgb":function(t,e,a){var n=a("rbhm");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("8bSs")("7040af20",n,!0)},EUKB:function(t,e,a){"use strict";var n=a("PHrY");e.a={data:function(){return{loading:!0,ids:"",disabled:!0,items:[],ModelList:[],params:{pid:0,modelId:"",name:"顶级分类"},breads:[{name:"所有分类",id:0}],props:{label:"name",children:"zones",isLeaf:"isChild",id:"id"}}},methods:{ansyTree:function(t,e){if(0===t.level)return e([{name:"顶级分类",id:0}]);t.level>0&&n.q({pid:t.data.id}).then(function(t){var a=[];for(var n in t.body){var i={};i.id=t.body[n].id,i.isChild=!t.body[n].isChild,i.name=t.body[n].name,a.push(i)}return e(a)})},addChannel:function(t){this.$router.push({path:"/channelList/save",query:{type:"save",topName:this.params.name,id:0,pid:this.params.pid,typeId:t}})},editForm:function(t){this.$router.push({path:"/channelList/update",query:{type:"update",topName:this.params.name,id:t,pid:this.params.pid}})},selectList:function(t,e,a){console.log(t),this.loading=!0,this.params.pid=t.id,this.getItems(),t.isChild?this.editForm(t.id):0==t.id?this.params.name="顶级分类":this.params.name=t.name},getItems:function(){var t=this;n.o(this.params).then(function(e){t.items=e.body,t.loading=!1})},savePriority:function(){var t=this;this.loading=!0;var e=[],a=[];for(var i in this.items)e.push(this.items[i].id),a.push(this.items[i].priority);e=e.join(","),a=a.join(",");var r={ids:e,prioritys:a};n.z(r).then(function(e){t.loading=!1,200==e.code&&t.successMessage("修改排序成功"),t.getItems()})},deleteItems:function(t){var e=this;this.$confirm("确定要删除吗?","警告",{type:"error"}).then(function(a){n.h({ids:t}).then(function(t){200==t.code&&e.successMessage("删除成功"),e.getItems()})}).catch(function(t){})},checkIds:function(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].id);0==e.length?(this.ids="",this.disabled=!0):(this.ids=e.join(","),this.disabled=!1)},reflash:function(){window.location.reload()}},created:function(){var t=this.$route.query.id;this.loading=!0,t&&(this.params.pid=t),this.getItems()}}},PHrY:function(t,e,a){"use strict";function n(t){return Object(q.a)({url:"/api/admin/resource/tree",method:"post",data:t})}function i(t){return Object(q.a)({url:"/api/admin/resource/list",method:"post",data:t})}function r(t){return Object(q.a)({url:"/api/admin/template/list",method:"post",data:t})}function s(t){return Object(q.a)({url:"/api/admin/resource/get",method:"post",data:t})}function o(t){return Object(q.a)({url:"/api/admin/template/get",method:"post",data:t})}function l(t){return Object(q.a)({url:"/api/admin/resource/delete",method:"post",signValidate:!0,data:t})}function d(t){return Object(q.a)({url:"/api/admin/template/delete",method:"post",signValidate:!0,data:t})}function u(t){return Object(q.a)({url:"api/admin/resource/dir_save",method:"post",signValidate:!0,data:t})}function c(t){return Object(q.a)({url:"api/admin/template/dir_save",method:"post",signValidate:!0,data:t})}function p(t){return Object(q.a)({url:"/api/admin/resource/rename",method:"post",signValidate:!0,data:t})}function m(t){return Object(q.a)({url:"/api/admin/template/rename",method:"post",signValidate:!0,data:t})}function h(t){return Object(q.a)({url:"/api/admin/template/update",method:"post",signValidate:!0,data:t})}function f(t){return Object(q.a)({url:"/api/admin/resource/save",method:"post",signValidate:!0,data:t})}function b(t){return Object(q.a)({url:"/api/admin/template/save",method:"post",signValidate:!0,data:t})}function v(t){return Object(q.a)({url:"/api/admin/template/tree",method:"post",data:t})}function g(t){return Object(q.a)({url:"/api/admin/template/getSolutions",method:"post",data:t})}function _(t){return Object(q.a)({url:"/api/admin/template/solutionupdate",method:"post",signValidate:!0,data:t})}function y(t){return Object(q.a)({url:E.a.getChannelTree,method:"post",signValidate:!0,data:t})}function j(t){return Object(q.a)({url:E.a.getChannelList,method:"post",signValidate:!0,data:t})}function C(t){return Object(q.a)({url:E.a.getChannelInfo,method:"post",signValidate:!0,data:t})}function O(t){return Object(q.a)({url:E.a.addChannelInfo,method:"post",signValidate:!0,data:t})}function w(t){return Object(q.a)({url:E.a.updateChannelInfo,method:"post",signValidate:!0,data:t})}function V(t){return Object(q.a)({url:E.a.deleteChannelInfo,method:"post",signValidate:!0,data:t})}function k(t){return Object(q.a)({url:E.a.priorityChannelInfo,method:"post",signValidate:!0,data:t})}function I(t){return Object(q.a)({url:E.a.getChannelTpl,method:"post",signValidate:!0,data:t})}function x(t){return Object(q.a)({url:E.a.getParentChannelList,method:"post",signValidate:!0,data:t})}function L(t){return Object(q.a)({url:E.a.getArticleList,method:"post",signValidate:!0,data:t})}function S(t){return Object(q.a)({url:E.a.getArticleInfo,method:"post",signValidate:!0,data:t})}function z(t){return Object(q.a)({url:E.a.addArticleInfo,method:"post",signValidate:!0,data:t})}function P(t){return Object(q.a)({url:E.a.updateArticleInfo,method:"post",signValidate:!0,data:t})}function A(t){return Object(q.a)({url:E.a.deleteArticleInfo,method:"post",signValidate:!0,data:t})}function $(t){return Object(q.a)({url:E.a.getArticleChannelList,method:"post",signValidate:!0,data:t})}e.u=n,e.t=i,e.x=r,e.s=s,e.w=o,e.i=l,e.j=d,e.e=u,e.f=c,e.A=p,e.C=m,e.F=h,e.c=f,e.d=b,e.y=v,e.v=g,e.B=_,e.q=y,e.o=j,e.n=C,e.b=O,e.E=w,e.h=V,e.z=k,e.p=I,e.r=x,e.m=L,e.l=S,e.a=z,e.D=P,e.g=A,e.k=$;var q=a("yYIz"),E=a("z+6n"),Y=a("DEjr");a.n(Y)},jxaV:function(t,e,a){"use strict";function n(t){a("0wgb")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("EUKB"),r=a("zbYP"),s=a("46Yf"),o=n,l=s(i.a,r.a,!1,o,"data-v-4db9f8c4",null);e.default=l.exports},rbhm:function(t,e,a){e=t.exports=a("BkJT")(!1),e.push([t.i,".tree-list[data-v-4db9f8c4]{margin-left:200px}",""])},zbYP:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"forum-module"},[t._m(0),t._v(" "),a("div",{staticClass:"tree-layout"},[a("div",{staticClass:"tree"},[a("div",{staticClass:"reflash",on:{click:function(e){t.reflash()}}},[a("span",{staticClass:"el-icon-refresh"}),t._v(" 刷新")]),t._v(" "),a("el-tree",{attrs:{props:t.props,load:t.ansyTree,lazy:"",indent:16,"node-key":"id","default-expanded-keys":[0]},on:{"node-click":t.selectList}})],1),t._v(" "),a("div",{staticClass:"tree-list"},[a("div",{staticClass:"table-top-bar clearfix"},[a("div",{staticClass:"query-inline-box"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addChannel(1)}}},[t._v("添加单页栏目")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addChannel(2)}}},[t._v("添加文章栏目")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addChannel(3)}}},[t._v("添加链接栏目")])],1)]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.items,stripe:""},on:{"selection-change":t.checkIds}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:68}}),t._v(" "),a("el-table-column",{attrs:{label:"id",prop:"id",align:"center",width:68}}),t._v(" "),a("el-table-column",{attrs:{label:"栏目名称",prop:"name",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?a("span",[t._v(t._s(e.row.name)+"[单页栏目]")]):t._e(),t._v(" "),2==e.row.type?a("span",[t._v(t._s(e.row.name)+"[文章栏目]")]):t._e(),t._v(" "),3==e.row.type?a("span",[t._v(t._s(e.row.name)+"[链接栏目]")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"访问路径",prop:"path",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.type?a("span",[t._v(t._s(e.row.outerUrl))]):a("span",[t._v(t._s(e.row.path))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"栏目页模板",prop:"tplChannel",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"内容页模板",prop:"tplContent",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"是否显示",prop:"display",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.display?a("span",[t._v("是")]):a("span",[t._v("否")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"排序",prop:"priority",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticClass:"w50",attrs:{type:"number",min:"0"},model:{value:e.row.priority,callback:function(a){t.$set(e.row,"priority",a)},expression:"scope.row.priority"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"t-edit",attrs:{title:"修改"},on:{click:function(a){t.editForm(e.row.id)}}}),t._v(" "),a("a",{staticClass:"t-del",attrs:{title:"删除"},on:{click:function(a){t.deleteItems(e.row.id)}}})]}}])})],1)],1),t._v(" "),a("div",{staticClass:"table-bottom-bar"},[a("div",{staticClass:"pull-left"},[a("el-button",{on:{click:t.savePriority}},[t._v("保存排序")]),t._v(" "),a("el-button",{attrs:{disabled:t.disabled},on:{click:function(e){t.deleteItems(t.ids)}}},[t._v("批量删除")])],1)])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"forum-header"},[a("span",{staticClass:"forum-name"},[t._v("分类列表")])])}],r={render:n,staticRenderFns:i};e.a=r}});