webpackJsonp([8],{IwcF:function(t,e,a){"use strict";var n=a("2sCs"),o=a.n(n),i=a("simw"),r=a("wc4o"),s=(a("FVK1"),a("Uwrw"));e.a={components:{imageUpload:s.a},data:function(){return{loading:!0,type:this.$route.query.type,id:this.$route.query.id,info:{couponTime:"",couponEndTime:""},roleItems:[],pathUrl:"",parantList:[],rules:{couponName:[{required:!0,message:"请输入优惠卷名",trigger:"blur"}],couponEndTime:[{required:!0,message:"请输入截止时间",trigger:"blur"}],couponTime:[{required:!0,message:"请输入开始时间",trigger:"blur"}]},pickerOptions2:{disabledDate:function(t){return t.getTime()<Date.now()}}}},methods:{getInfo:function(t){var e=this;o.a.all([i.t({id:t}),r.z()]).then(o.a.spread(function(t,a){e.info=t.body,e.info.isusing=!0,e.parantList=a.body,e.loading=!1}))},getPath:function(t){this.info.couponPicture=t,this.pathUrl=t},saveForm:function(t){var e=this;this.$refs.form.validate(function(a){a&&(e.loading=!0,i.d(e.info).then(function(a){e.loading=!1,200==a.code&&(e.successMessage("添加成功"),t?(e.getInfo(0),e.pathUrl=""):setTimeout(function(){e.routerLink("/coupon","list")},1e3))}))})},restForm:function(){this.$refs.form.resetFields(),this.getInfo(0),this.pathUrl=""}},watch:{selectRole:function(t,e){var a=t.join(",");this.info.roleIds=a}},created:function(){this.getInfo(this.id)}}},Mlkw:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gou-upload",staticStyle:{position:"relative"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:this.$store.state.sys.upLoadUrl,name:"uploadFile",data:t.upload.data,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"on-progress":t.handleAvatarProgress}},[t.upload.uploading?a("div",{staticClass:"uploading"},[a("el-progress",{attrs:{type:"circle",percentage:t.upload.percent}})],1):t._e(),t._v(" "),t.upload.imageUrl?a("div",{staticClass:"upload-hover-box"},[a("img",{staticClass:"avatar",attrs:{src:t.upload.imageUrl}}),t._v(" "),t.upload.imageUrl?a("span",{staticClass:"upload-cover"},[t._v("点击修改图片")]):t._e()]):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),t.upload.imageUrl?a("i",{staticClass:"iconfont bbs-delete pos-del",attrs:{title:"删除"},on:{click:function(e){e.preventDefault(),t.delImg(e)}}}):t._e()],1)},o=[],i={render:n,staticRenderFns:o};e.a=i},NZkp:function(t,e,a){"use strict";var n=a("2RFS"),o=a("s4F+");e.a={name:"imageUpload",props:{path:{type:String,default:""},index:{type:Number,default:0}},data:function(){var t=Object(n.a)();return{upload:{url:this.$store.state.sys.baseUrl,imageUrl:"",uploading:!1,percent:0,data:Object(o.a)({appId:this.$store.state.sys.appId,sessionKey:localStorage.getItem("sessionKey"),type:"image",nonceStr:t},this.$store.state.sys.appKey)}}},methods:{handleAvatarSuccess:function(t,e){this.upload.uploading=!1,this.upload.percent=0,200==t.code?(this.upload.imageUrl=URL.createObjectURL(e.raw),this.$emit("getPath",t.body.url,this.index)):209==t.code?(this.errorMessage("无上传权限"),this.$emit("getPath","",this.index)):(this.errorMessage("上传失败，请检查文件类型"),this.$emit("getPath","",this.index))},handleAvatarProgress:function(t,e,a){this.upload.uploading=!0,this.upload.percent=parseInt(t.percent)},delImg:function(){this.upload.imageUrl="",this.$emit("getPath","",this.index)}},created:function(){""==this.path||null==this.path?this.upload.imageUrl="":this.path.indexOf("http://")>=0?this.upload.imageUrl=this.path:this.upload.imageUrl=this.upload.url+this.path},watch:{path:function(t,e){""==this.path||null==this.path?this.upload.imageUrl="":this.upload.imageUrl=this.upload.url+this.path}}}},T9Ip:function(t,e,a){var n=a("kIg/");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("8bSs")("0582fcd4",n,!0)},Uwrw:function(t,e,a){"use strict";function n(t){a("T9Ip")}var o=a("NZkp"),i=a("Mlkw"),r=a("/Xao"),s=n,d=r(o.a,i.a,!1,s,"data-v-ced38416",null);e.a=d.exports},fK6w:function(t,e,a){var n=a("i8fw");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("8bSs")("725e3154",n,!0)},i8fw:function(t,e,a){e=t.exports=a("BkJT")(!1),e.push([t.i,"",""])},iR6f:function(t,e,a){"use strict";function n(t){a("fK6w")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("IwcF"),i=a("xaXb"),r=a("/Xao"),s=n,d=r(o.a,i.a,!1,s,null,null);e.default=d.exports},"kIg/":function(t,e,a){e=t.exports=a("BkJT")(!1),e.push([t.i,".gou-upload[data-v-ced38416]{width:178px}.pos-del[data-v-ced38416]{position:absolute;width:45px;height:45px;color:#fff;cursor:pointer;top:0;right:0;font-size:25px;display:none;z-index:15;text-align:center}.gou-upload:hover .pos-del[data-v-ced38416],.gou-upload:hover .upload-cover[data-v-ced38416]{display:block}",""])},simw:function(t,e,a){"use strict";function n(t){return Object(B.a)({url:M.a.getAdminList,method:"post",data:t,signValidate:!0})}function o(t){return Object(B.a)({url:M.a.getAdminInfo,method:"post",data:t,signValidate:!0})}function i(t){return Object(B.a)({url:M.a.addAdminInfo,method:"post",data:t,signValidate:!0,nonceStr:!0})}function r(t){return Object(B.a)({url:M.a.deleteAdminInfo,method:"post",data:t,nonceStr:!0,signValidate:!0})}function s(t){return Object(B.a)({url:M.a.updateAdminInfo,method:"post",data:t,signValidate:!0})}function d(t){return Object(B.a)({url:M.a.getRoleList,method:"post",data:t,signValidate:!0})}function l(t){return Object(B.a)({url:M.a.getRoleInfo,method:"post",data:t,signValidate:!0})}function u(t){return Object(B.a)({url:M.a.addRoleInfo,method:"post",data:t,nonceStr:!0,signValidate:!0})}function c(t){return Object(B.a)({url:M.a.updateRoleInfo,method:"post",data:t,nonceStr:!0,signValidate:!0})}function p(t){return Object(B.a)({url:M.a.deleteRoleInfo,method:"post",data:t,signValidate:!0})}function f(t){return Object(B.a)({url:M.a.getCouponList,method:"post",data:t,signValidate:!0})}function m(t){return Object(B.a)({url:M.a.getCouponInfo,method:"post",data:t,signValidate:!0})}function g(t){return Object(B.a)({url:M.a.addCouponInfo,method:"post",data:t,signValidate:!0})}function h(t){return Object(B.a)({url:M.a.deleteCouponInfo,method:"post",data:t,signValidate:!0})}function b(t){return Object(B.a)({url:M.a.disabledCouponInfo,method:"post",data:t,nonceStr:!0,signValidate:!0})}function v(t){return Object(B.a)({url:M.a.getCustomerServiceList,method:"post",data:t,signValidate:!0})}function y(t){return Object(B.a)({url:M.a.getCustomerServiceInfo,method:"post",data:t,signValidate:!0})}function O(t){return Object(B.a)({url:M.a.addCustomerServiceInfo,method:"post",data:t,signValidate:!0})}function j(t){return Object(B.a)({url:M.a.updateCustomerServiceInfo,method:"post",data:t,signValidate:!0})}function V(t){return Object(B.a)({url:M.a.deleteCustomerServiceInfo,method:"post",data:t,signValidate:!0})}function I(t){return Object(B.a)({url:M.a.priorityCustomerServiceInfo,method:"post",data:t,signValidate:!0})}function S(t){return Object(B.a)({url:M.a.getPosterList,method:"post",data:t,signValidate:!0})}function C(t){return Object(B.a)({url:M.a.updatePosterInfo,method:"post",data:t,signValidate:!0})}function _(t){return Object(B.a)({url:M.a.getLogList,method:"post",data:t,signValidate:!0})}function x(t){return Object(B.a)({url:M.a.getAdspaceList,method:"post",data:t,signValidate:!0})}function w(t){return Object(B.a)({url:M.a.getAdspaceInfo,method:"post",data:t,signValidate:!0})}function k(t){return Object(B.a)({url:M.a.addAdspaceInfo,method:"post",data:t,signValidate:!0})}function L(t){return Object(B.a)({url:M.a.updateAdspaceInfo,method:"post",data:t,signValidate:!0})}function T(t){return Object(B.a)({url:M.a.deleteAdspaceInfo,method:"post",data:t,signValidate:!0})}function P(t){return Object(B.a)({url:M.a.getAdvertiseList,method:"post",data:t,signValidate:!0})}function U(t){return Object(B.a)({url:M.a.getAdvertiseInfo,method:"post",data:t,signValidate:!0})}function $(t){return Object(B.a)({url:M.a.addAdvertiseInfo,method:"post",data:t,signValidate:!0})}function A(t){return Object(B.a)({url:M.a.updateAdvertiseInfo,method:"post",data:t,signValidate:!0})}function F(t){return Object(B.a)({url:M.a.deleteAdvertiseInfo,method:"post",data:t,signValidate:!0})}e.o=n,e.n=o,e.a=i,e.g=r,e.C=s,e.A=d,e.z=l,e.f=u,e.H=c,e.l=p,e.u=f,e.t=m,e.d=g,e.j=h,e.m=b,e.w=v,e.v=y,e.e=O,e.F=j,e.k=V,e.B=I,e.y=S,e.G=C,e.x=_,e.q=x,e.p=w,e.b=k,e.D=L,e.h=T,e.s=P,e.r=U,e.c=$,e.E=A,e.i=F;var B=a("yYIz"),M=a("z+6n")},wc4o:function(t,e,a){"use strict";function n(t){return Object(W.a)({url:tt.a.getProductList,method:"post",data:t,nonceStr:!0,signValidate:!0})}function o(t){return Object(W.a)({url:tt.a.getProductInfo,method:"post",data:t,nonceStr:!0,signValidate:!0})}function i(t){return Object(W.a)({url:tt.a.getBrandListByCategoryId,method:"post",data:t,nonceStr:!0,signValidate:!0})}function r(t){return Object(W.a)({url:tt.a.addProductList,method:"post",data:t,nonceStr:!0,signValidate:!0})}function s(t){return Object(W.a)({url:tt.a.updateProductList,method:"post",data:t,nonceStr:!0,signValidate:!0})}function d(t){return Object(W.a)({url:tt.a.deleteProductList,method:"post",data:t,nonceStr:!0,signValidate:!0})}function l(t){return Object(W.a)({url:tt.a.getCommodityCategoryTree,method:"post",data:t,signValidate:!0})}function u(t){return Object(W.a)({url:tt.a.getCommodityCategoryList,method:"post",data:t,signValidate:!0})}function c(t){return Object(W.a)({url:tt.a.getCommodityCategoryInfo,method:"post",data:t,signValidate:!0})}function p(t){return Object(W.a)({url:tt.a.getHotList,method:"post",data:t,signValidate:!0})}function f(t){return Object(W.a)({url:tt.a.getSaleChatList,method:"post",data:t,signValidate:!0})}function m(t){return Object(W.a)({url:tt.a.addCommodityCategoryInfo,method:"post",data:t,nonceStr:!0,signValidate:!0})}function g(t){return Object(W.a)({url:tt.a.updateCommodityCategoryInfo,method:"post",data:t,nonceStr:!0,signValidate:!0})}function h(t){return Object(W.a)({url:tt.a.getCommodityTopCategory,method:"post",data:t,signValidate:!0})}function b(t){return Object(W.a)({url:tt.a.getCommodityTemplate,method:"post",data:t,signValidate:!0})}function v(t){return Object(W.a)({url:tt.a.getCommodityBrand,method:"post",nonceStr:!0,data:t,signValidate:!0})}function y(t){return Object(W.a)({url:tt.a.getCommodityStandardType,method:"post",nonceStr:!0,data:t,signValidate:!0})}function O(t){return Object(W.a)({url:tt.a.getBrandList,method:"post",nonceStr:!0,data:t,signValidate:!0})}function j(t){return Object(W.a)({url:tt.a.getBrandInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function V(t){return Object(W.a)({url:tt.a.getBrandTypeInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function I(t){return Object(W.a)({url:tt.a.addBrandInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function S(t){return Object(W.a)({url:tt.a.updateBrandInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function C(t){return Object(W.a)({url:tt.a.deleteBrandInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function _(t){return Object(W.a)({url:tt.a.priorityBrandInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function x(t){return Object(W.a)({url:tt.a.deleteCommodityCategoryInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function w(t){return Object(W.a)({url:tt.a.priorityCommodityCategoryInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function k(t){return Object(W.a)({url:tt.a.getStandardList,method:"post",nonceStr:!0,data:t,signValidate:!0})}function L(t){return Object(W.a)({url:tt.a.getStandardInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function T(t){return Object(W.a)({url:tt.a.addStandardInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function P(t){return Object(W.a)({url:tt.a.updateStandardInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function U(t){return Object(W.a)({url:tt.a.deleteStandardInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function $(t){return Object(W.a)({url:tt.a.priorityStandardInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function A(t){return Object(W.a)({url:tt.a.getTypeInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function F(t){return Object(W.a)({url:tt.a.addTypeInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function B(t){return Object(W.a)({url:tt.a.updateTypeInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function M(t){return Object(W.a)({url:tt.a.deleteTypeInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function N(t){return Object(W.a)({url:tt.a.getModelList,method:"post",nonceStr:!0,data:t,signValidate:!0})}function R(t){return Object(W.a)({url:tt.a.getModelListAll,method:"post",nonceStr:!0,data:t,signValidate:!0})}function D(t){return Object(W.a)({url:tt.a.getModelInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function E(t){return Object(W.a)({url:tt.a.getConsultList,method:"post",nonceStr:!0,data:t,signValidate:!0})}function z(t){return Object(W.a)({url:tt.a.getConsultInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function q(t){return Object(W.a)({url:tt.a.updateConsultInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function H(t){return Object(W.a)({url:tt.a.deleteConsultInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function K(t){return Object(W.a)({url:tt.a.getDiscussList,method:"post",nonceStr:!0,data:t,signValidate:!0})}function X(t){return Object(W.a)({url:tt.a.getDiscussInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function J(t){return Object(W.a)({url:tt.a.updateDiscussInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function G(t){return Object(W.a)({url:tt.a.deleteDiscussInfo,method:"post",nonceStr:!0,data:t,signValidate:!0})}function Y(t){return Object(W.a)({url:tt.a.addDefaultTypeProperty,method:"post",nonceStr:!0,data:t,signValidate:!0})}function Z(t){return Object(W.a)({url:tt.a.addTypePropertyContent,method:"post",nonceStr:!0,data:t,signValidate:!0})}function Q(t){return Object(W.a)({url:tt.a.deleteTypePropertyContent,method:"post",nonceStr:!0,data:t,signValidate:!0})}e.J=n,e.I=o,e.r=i,e.d=r,e.V=s,e.l=d,e.w=l,e.v=u,e.u=c,e.E=p,e.K=f,e.b=m,e.S=g,e.z=h,e.y=b,e.t=v,e.x=y,e.q=O,e.p=j,e.s=V,e.a=I,e.R=S,e.h=C,e.O=_,e.i=x,e.P=w,e.M=k,e.L=L,e.e=T,e.W=P,e.m=U,e.Q=$,e.N=A,e.f=F,e.X=B,e.n=M,e.G=N,e.H=R,e.F=D,e.B=E,e.A=z,e.T=q,e.j=H,e.D=K,e.C=X,e.U=J,e.k=G,e.c=Y,e.g=Z,e.o=Q;var W=a("yYIz"),tt=a("z+6n")},xaXb:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"forum-module"},[a("div",{staticClass:"forum-header"},[a("span",{staticClass:"forum-name"},[t._v(t._s(t.$route.name))]),t._v(" "),a("div",{staticClass:"pull-right"},[a("el-button",{staticClass:"back",on:{click:function(e){t.routerLink("/coupon","list")}}},[t._v("返回列表")])],1)]),t._v(" "),a("el-form",{ref:"form",staticClass:"table-body",attrs:{"label-width":"160px",model:t.info,rules:t.rules}},[a("el-row",{staticClass:"form-group"},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24}},[a("el-form-item",{attrs:{label:"优惠卷名称",prop:"couponName"}},[a("el-input",{staticClass:"w192",attrs:{minlength:2,maxlength:50},model:{value:t.info.couponName,callback:function(e){t.$set(t.info,"couponName",e)},expression:"info.couponName"}})],1)],1),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:12,lg:12}},[a("el-form-item",{attrs:{label:"开始时间",prop:"couponTime"}},[a("el-date-picker",{staticClass:"w192",attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择\b开始时间"},model:{value:t.info.couponTime,callback:function(e){t.$set(t.info,"couponTime",e)},expression:"info.couponTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:12,lg:12}},[a("el-form-item",{attrs:{label:"结束时间",prop:"couponEndTime"}},[a("el-date-picker",{staticClass:"w192",attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.pickerOptions2,placeholder:"选择\b结束时间"},model:{value:t.info.couponEndTime,callback:function(e){t.$set(t.info,"couponEndTime",e)},expression:"info.couponEndTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:12,lg:12}},[a("el-form-item",{attrs:{label:"规则"}},[a("div",{staticStyle:{display:"inline-block"}},[t._v("满\b "),a("el-input",{staticClass:"w50",attrs:{type:"number",min:"0"},model:{value:t.info.leastPrice,callback:function(e){t.$set(t.info,"leastPrice",e)},expression:"info.leastPrice"}}),t._v("  元")],1),t._v(" "),a("div",{staticStyle:{display:"inline-block","margin-left":"10px"}},[t._v("减  "),a("el-input",{staticClass:"w50",attrs:{type:"number",min:"0"},model:{value:t.info.couponPrice,callback:function(e){t.$set(t.info,"couponPrice",e)},expression:"info.couponPrice"}}),t._v(" 元")],1)])],1),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:12,lg:12}},[a("el-form-item",{attrs:{label:"发放数量",prop:"couponCount"}},[a("el-input",{staticClass:"w192",model:{value:t.info.couponCount,callback:function(e){t.$set(t.info,"couponCount",t._n(e))},expression:"info.couponCount"}})],1)],1),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:12,lg:12}},[a("el-form-item",{attrs:{label:"是否\b启用"}},[a("el-radio",{attrs:{label:!0},model:{value:t.info.isusing,callback:function(e){t.$set(t.info,"isusing",e)},expression:"info.isusing"}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:!1},model:{value:t.info.isusing,callback:function(e){t.$set(t.info,"isusing",e)},expression:"info.isusing"}},[t._v("否")])],1)],1),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:12,lg:12}},[a("el-form-item",{attrs:{label:"选择适用分类",required:!0}},[a("el-select",{staticClass:"w192",attrs:{filterable:"",placeholder:"请选择"},model:{value:t.info.categoryId,callback:function(e){t.$set(t.info,"categoryId",e)},expression:"info.categoryId"}},[a("el-option",{attrs:{label:"所有分类",value:""}}),t._v(" "),t._l(t.parantList,function(e){return a("el-option",{key:e.id,attrs:{label:e.categoryName,value:e.id}},[e.leval>1?a("span",{style:{paddingLeft:10*e.leval+"px"}},[t._v(">"+t._s(e.categoryName))]):a("span",{style:{paddingLeft:10*e.leval+"px"}},[t._v(t._s(e.categoryName))])])})],2)],1)],1),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24}},[a("el-form-item",{attrs:{label:"优惠卷图片"}},[a("imageUpload",{attrs:{path:t.pathUrl},on:{getPath:t.getPath}})],1)],1),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24}},[a("el-form-item",{attrs:{label:"活动说明"}},[a("el-input",{staticClass:"w192",attrs:{type:"textarea",rows:8},model:{value:t.info.comments,callback:function(e){t.$set(t.info,"comments",e)},expression:"info.comments"}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"form-bottom-bar"},["save"==t.type?a("el-button",{attrs:{type:"warning"},on:{click:function(e){t.saveForm(!0)}}},[t._v("提交并继续添加")]):t._e(),t._v(" "),"save"==t.type?a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveForm(!1)}}},[t._v("添加")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.restForm()}}},[t._v("重置")]),t._v(" "),"save"==t.type?a("div",{staticClass:"help-info"},[t._v("选择“提交并继续添加”按钮会停留在添加页面；选择“添加”按钮后将跳转到对应的列表页。")]):t._e()],1)],1)},o=[],i={render:n,staticRenderFns:o};e.a=i}});