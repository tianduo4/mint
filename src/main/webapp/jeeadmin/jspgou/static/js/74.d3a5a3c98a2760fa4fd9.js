webpackJsonp([74],{EVaU:function(t,e,a){"use strict";var i=a("2RFS"),s=a("s4F+"),n=a("PHrY");e.a={data:function(){return{progress:0,progressState:!1,state:!1,statefont:"上传文件",loading:!0,resourceList:[],names:"",groupList:[],params:{pageNo:1,pageSize:20,root:""},upobj:{},fileName:"",totalCount:0,currentPage:1,changePageSize:localStorage.getItem("PageSize"),disabled:!0}},methods:{getTemplateList:function(){var t=this,e=this.params;n.x(e).then(function(e){200==e.code?(t.resourceList=e.body,t.totalCount=e.totalCount,e.body.length>0&&(t.params.root=e.body[0].path,t.upobj=Object(s.a)({appId:t.$store.state.sys.appId,sessionKey:localStorage.getItem("sessionKey"),root:e.body[0].path,nonceStr:Object(i.a)()},t.$store.state.sys.appKey)),t.loading=!1):t.loading=!1}).catch(function(e){t.loading=!1,t.$message.error("网络异常")})},showProgress:function(t,e,a){this.progressState=!0,t.percent>0&&t.percent<100?this.progress=parseInt(t.percent):100==t.percent&&(this.progressState=!1,this.progress=0,this.getTemplateList())},beforeAvatarUpload:function(t){var e="text/html"===t.type;return e||this.$message.error("模版只能上传html文件"),e},upSuccess:function(t,e,a){200==t.code?(this.state=!1,this.getTemplateList()):209==t.code?this.errorMessage("无上传权限"):this.errorMessage("上传失败")},queryChild:function(t,e,a){this.params.root=e,a&&this.$router.push({path:"/templatelist",query:{name:t}})},newFile:function(){var t=this;this.loading=!0;var e={root:this.params.root,dirName:this.fileName};n.f(e).then(function(e){200==e.code?(t.params.root=t.params.root,t.getTemplateList()):(t.loading=!1,t.$message.error(e.message))}).catch(function(e){t.loading=!1,t.$message.error("创建失败")})},editResource:function(t){this.$router.push({path:"/templateedit",query:{type:"edit",id:t,root:this.params.root}})},addResource:function(){this.$router.push({path:"/templateadd",query:{type:"add",id:this.params.root,root:this.params.root}})},reName:function(t){this.$router.push({path:"/templaterename",query:{name:t,root:this.params.root}})},deleteTemplateList:function(t){var e=this;this.names=t,this.$confirm("您确定要删除模版吗?","警告",{type:"warning"}).then(function(t){n.j({names:e.names}).then(function(t){e.loading=!1,200==t.code&&(e.$message.success("删除成功"),e.getTemplateList())}).catch(function(t){e.loading=!1,e.$message.error("网络异常")})}).catch(function(t){})},getPage:function(t){this.loading=!0,this.params.pageNo=t,this.getTemplateList()},getSize:function(t){this.loading=!0,this.params.pageNo=t,this.getTemplateList()},changeSize:function(t){var e=t.target.value;e<1?(localStorage.setItem("PageSize",20),e=20):localStorage.setItem("PageSize",e),this.loading=!0,this.params.pageSize=parseInt(e),this.params.pageNo=1,this.currentPage=1,this.getTemplateList()},checkIds:function(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].name);0==e.length?(this.names="",this.disabled=!0):(this.names=e.join(","),this.disabled=!1)}},created:function(){var t=localStorage.getItem("PageSize");null!=t?this.params.pageSize=parseInt(t):this.changePageSize=20,this.params.root=this.$route.query.name,this.upobj.root=this.$route.query.name,this.getTemplateList()},watch:{$route:function(t,e){this.params.root=this.$route.query.name,this.upobj.root=this.$route.query.name,this.loading=!0,this.getTemplateList(),this.fileName=""}}}},H82W:function(t,e,a){var i=a("OiuV");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("8bSs")("686de0ea",i,!0)},OiuV:function(t,e,a){e=t.exports=a("BkJT")(!1),e.push([t.i,".cur[data-v-6a309e34]{cursor:pointer}.inline-block[data-v-6a309e34]{display:inline-block;width:500px}.inline-block>[data-v-6a309e34]{float:left}",""])},PHrY:function(t,e,a){"use strict";function i(t){return Object(T.a)({url:"/api/admin/resource/tree",method:"post",data:t})}function s(t){return Object(T.a)({url:"/api/admin/resource/list",method:"post",data:t})}function n(t){return Object(T.a)({url:"/api/admin/template/list",method:"post",data:t})}function o(t){return Object(T.a)({url:"/api/admin/resource/get",method:"post",data:t})}function r(t){return Object(T.a)({url:"/api/admin/template/get",method:"post",data:t})}function l(t){return Object(T.a)({url:"/api/admin/resource/delete",method:"post",signValidate:!0,data:t})}function c(t){return Object(T.a)({url:"/api/admin/template/delete",method:"post",signValidate:!0,data:t})}function u(t){return Object(T.a)({url:"api/admin/resource/dir_save",method:"post",signValidate:!0,data:t})}function d(t){return Object(T.a)({url:"api/admin/template/dir_save",method:"post",signValidate:!0,data:t})}function p(t){return Object(T.a)({url:"/api/admin/resource/rename",method:"post",signValidate:!0,data:t})}function m(t){return Object(T.a)({url:"/api/admin/template/rename",method:"post",signValidate:!0,data:t})}function h(t){return Object(T.a)({url:"/api/admin/template/update",method:"post",signValidate:!0,data:t})}function g(t){return Object(T.a)({url:"/api/admin/resource/save",method:"post",signValidate:!0,data:t})}function f(t){return Object(T.a)({url:"/api/admin/template/save",method:"post",signValidate:!0,data:t})}function b(t){return Object(T.a)({url:"/api/admin/template/tree",method:"post",data:t})}function v(t){return Object(T.a)({url:"/api/admin/template/getSolutions",method:"post",data:t})}function y(t){return Object(T.a)({url:"/api/admin/template/solutionupdate",method:"post",signValidate:!0,data:t})}function j(t){return Object(T.a)({url:P.a.getChannelTree,method:"post",signValidate:!0,data:t})}function w(t){return Object(T.a)({url:P.a.getChannelList,method:"post",signValidate:!0,data:t})}function _(t){return Object(T.a)({url:P.a.getChannelInfo,method:"post",signValidate:!0,data:t})}function O(t){return Object(T.a)({url:P.a.addChannelInfo,method:"post",signValidate:!0,data:t})}function C(t){return Object(T.a)({url:P.a.updateChannelInfo,method:"post",signValidate:!0,data:t})}function S(t){return Object(T.a)({url:P.a.deleteChannelInfo,method:"post",signValidate:!0,data:t})}function V(t){return Object(T.a)({url:P.a.priorityChannelInfo,method:"post",signValidate:!0,data:t})}function I(t){return Object(T.a)({url:P.a.getChannelTpl,method:"post",signValidate:!0,data:t})}function k(t){return Object(T.a)({url:P.a.getParentChannelList,method:"post",signValidate:!0,data:t})}function L(t){return Object(T.a)({url:P.a.getArticleList,method:"post",signValidate:!0,data:t})}function z(t){return Object(T.a)({url:P.a.getArticleInfo,method:"post",signValidate:!0,data:t})}function $(t){return Object(T.a)({url:P.a.addArticleInfo,method:"post",signValidate:!0,data:t})}function x(t){return Object(T.a)({url:P.a.updateArticleInfo,method:"post",signValidate:!0,data:t})}function q(t){return Object(T.a)({url:P.a.deleteArticleInfo,method:"post",signValidate:!0,data:t})}function N(t){return Object(T.a)({url:P.a.getArticleChannelList,method:"post",signValidate:!0,data:t})}e.u=i,e.t=s,e.x=n,e.s=o,e.w=r,e.i=l,e.j=c,e.e=u,e.f=d,e.A=p,e.C=m,e.F=h,e.c=g,e.d=f,e.y=b,e.v=v,e.B=y,e.q=j,e.o=w,e.n=_,e.b=O,e.E=C,e.h=S,e.z=V,e.p=I,e.r=k,e.m=L,e.l=z,e.a=$,e.D=x,e.g=q,e.k=N;var T=a("yYIz"),P=a("z+6n"),A=a("DEjr");a.n(A)},hw0J:function(t,e,a){"use strict";function i(t){a("H82W")}Object.defineProperty(e,"__esModule",{value:!0});var s=a("EVaU"),n=a("r/VI"),o=a("/Xao"),r=i,l=o(s.a,n.a,!1,r,"data-v-6a309e34",null);e.default=l.exports},"r/VI":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table-top-bar clearfix",staticStyle:{position:"relative"}},[a("div",{staticClass:"query-inline-box "},[a("div",{staticClass:"query-inline-group"},[a("i",{staticClass:"iconfont bbs-mulu",staticStyle:{color:"#b3b4b4","font-size":"22px"}}),t._v(" "),a("span",{staticClass:"gray",staticStyle:{flex:"auto"}},[t._v("当前目录：")]),t._v(" "),a("span",{staticStyle:{flex:"auto","font-size":"14px"}},[t._v(" "+t._s(t.params.root))])]),t._v(" "),a("div",{staticClass:"query-inline-group"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addResource}},[t._v("新建文件")])],1),t._v(" "),a("div",{staticClass:"query-inline-group"},[a("el-upload",{staticClass:"tpl-block",staticStyle:{display:"inline-block"},attrs:{action:t.$store.state.sys.templateUpLoad,name:"uploadFile",data:t.upobj,multiple:!0,"on-success":t.upSuccess,"before-upload":t.beforeAvatarUpload,"show-file-list":!1,"on-progress":t.showProgress}},[a("el-button",{attrs:{loading:t.state}},[t._v(t._s(t.statefont))])],1),t._v(" "),a("div",{staticClass:"po-progress"},[a("el-progress",{directives:[{name:"show",rawName:"v-show",value:t.progressState,expression:"progressState"}],attrs:{percentage:t.progress,"stroke-width":5}})],1)],1),t._v(" "),a("div",{staticClass:"query-inline-group"},[a("label",[t._v("新建目录:")]),t._v(" "),a("el-input",{model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}})],1),t._v(" "),a("div",{staticClass:"query-inline-group"},[a("el-button",{on:{click:t.newFile}},[t._v("新建")])],1)])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:t.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"table-responsive"},[a("form",{staticClass:"form-horizontal no-margin"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.resourceList},on:{"selection-change":t.checkIds}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"68"}}),t._v(" "),a("el-table-column",{attrs:{label:"文件名",prop:"filename",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"cur",on:{click:function(a){t.queryChild(e.row.name,e.row.path,e.row.isDirectory)}}},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.row.isDirectory,expression:"scope.row.isDirectory"}],staticClass:"iconfont bbs-wenjianjiabiheicon"}),t._v("\n                                "+t._s(e.row.filename)+"\n                            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"大小",prop:"size",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.size)+" KB")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"最后修改时间",prop:"lastModifiedDate",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:300},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"t-rename iconfont bbs-zhongmingming",attrs:{href:"javascript:void(0)",title:"重命名"},on:{click:function(a){t.reName(e.row.name)}}}),t._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:!e.row.isDirectory,expression:"!scope.row.isDirectory"}],staticClass:"t-edit iconfont bbs-edit",attrs:{href:"javascript:void(0)",title:"编辑"},on:{click:function(a){t.editResource(e.row.name)}}}),t._v(" "),a("a",{staticClass:"t-del iconfont bbs-delete",attrs:{href:"javascript:void(0)",title:"删除"},on:{click:function(a){t.deleteTemplateList(e.row.name)}}})]}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"table-bottom-bar"},[a("div",{staticClass:"pull-left"},[a("el-button",{attrs:{disabled:t.disabled},on:{click:function(e){t.deleteTemplateList(t.names)}}},[t._v("批量删除")])],1)])])},s=[],n={render:i,staticRenderFns:s};e.a=n}});